version: '3.8'

services:
  # 1. NeuralGraphDB (Target)
  neuralgraph:
    build: .
    image: neuralgraph:0.1.0
    container_name: benchmark-neuralgraph
    ports:
      - "3000:3000"   # HTTP
      - "50051:50051" # Flight
    volumes:
      - ./data:/data
      - neuralgraph-cache:/root/.cache/neuralgraph
    command: ["serve"]

  # 2. Neo4j (Standard Baseline)
  neo4j:
    image: neo4j:5.15-community
    container_name: benchmark-neo4j
    ports:
      - "17474:7474" # HTTP Browser
      - "17687:7687" # Bolt
    environment:
      - NEO4J_AUTH=neo4j/benchmark123
      - NEO4J_dbms_memory_heap_initial__size=1G
      - NEO4J_dbms_memory_heap_max__size=2G
      - NEO4J_PLUGINS=["apoc"]
    volumes:
      - neo4j-data:/data

  # 3. FalkorDB (Redis-based Speed Baseline)
  falkordb:
    image: falkordb/falkordb:latest
    container_name: benchmark-falkordb
    ports:
      - "16379:6379"
    volumes:
      - falkordb-data:/data

volumes:
  neuralgraph-cache:
  neo4j-data:
  falkordb-data:
